<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <title>WebGIS Pariwisata Sleman</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- GeoServer Leaflet -->
    <script src="lib/L.Geoserver.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Google Font Vintage -->
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Libre+Baskerville&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Libre Baskerville', serif;
            background-color: #f5f1ea;
        }

        .hero {
            height: 100vh;
            background: linear-gradient(rgba(30, 20, 10, 0.6), rgba(30, 20, 10, 0.6)),
                url("img/ullen_sentalu.jpg") center/cover no-repeat;
            color: #fdf6e3;
            display: flex;
            align-items: center;
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 700;
        }

        .content-section {
            background: linear-gradient(rgba(245, 241, 234, 0.92), rgba(245, 241, 234, 0.92)),
                url("img/monjali.jpg") center/cover fixed no-repeat;
            padding: 70px 0;
        }

        #map {
            height: 600px;
            border-radius: 16px;
            border: 4px solid #8b6f47;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .card {
            border-radius: 16px;
            border: 3px solid #8b6f47;
            background-color: rgba(255, 255, 255, 0.95);
        }

        thead {
            background-color: #8b6f47;
            color: #fff;
        }

        tbody tr:hover {
            background-color: #f1e6d2;
        }

        .leaflet-popup-content-wrapper {
            background: #fdf6e3;
            border-radius: 12px;
            border: 2px solid #8b6f47;
        }

        .leaflet-popup-tip {
            background: #8b6f47;
        }

        html {
            scroll-behavior: smooth;
        }
    </style>
</head>

<body>

    <!-- HERO -->
    <section class="hero">
        <div class="container text-center">
            <h1>Analisis Jumlah Pengunjung di Sektor Pariwisata<br>Kabupaten Sleman</h1>
            <p class="mt-4 mx-auto">
                WebGIS ini menyajikan visualisasi spasial objek wisata Kabupaten Sleman
                yang dilengkapi dengan jaringan jalan kolektor, batas administrasi,
                serta data jumlah kunjungan wisatawan.
            </p>
            <a href="#mapSection" class="btn btn-outline-light mt-4 px-4 py-2 rounded-pill">
                Jelajahi Peta
            </a>
        </div>
    </section>

    <!-- MAP & DATA -->
    <section id="mapSection" class="content-section">
        <div class="container">

            <h4 class="text-center mb-4 fw-bold" style="font-family: 'Playfair Display', serif;">
                ðŸŒ¿ Peta Interaktif dan Statistik Pariwisata
            </h4>

            <div id="map" class="mb-5"></div>

            <!-- TABEL -->
            <div class="card shadow mb-5">
                <div class="card-body table-responsive">
                    <h5 class="text-center mb-3">Tabel Jumlah Pengunjung Pariwisata</h5>
                    <table class="table table-bordered table-striped" id="tabelData">
                        <thead class="text-center">
                            <tr>
                                <th>Nama Obyek</th>
                                <th>Jan</th>
                                <th>Feb</th>
                                <th>Mar</th>
                                <th>Apr</th>
                                <th>Mei</th>
                                <th>Jun</th>
                                <th>Jul</th>
                                <th>Agu</th>
                                <th>Sep</th>
                                <th>Okt</th>
                                <th>Nov</th>
                                <th>Des</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- ANCHOR ANALISIS -->
            <div id="analisis" style="scroll-margin-top:90px;"></div>

            <div class="card shadow">

                <div class="card-body">

                    <h5 class="text-center mb-4" style="font-family: 'Playfair Display', serif;">
                        Analisis Aksesibilitas Jalan Kolektor terhadap Jumlah Pengunjung
                    </h5>

                    <p style="text-align: justify;">
                        Analisis ini dilakukan dengan memanfaatkan WebGIS sebagai media
                        visualisasi spasial objek wisata di Kabupaten Sleman yang dilengkapi
                        dengan jaringan jalan kolektor, batas administrasi, serta data jumlah
                        kunjungan wisatawan. Integrasi data spasial dan atribut memungkinkan
                        pengamatan keterkaitan antara kondisi aksesibilitas wilayah dan
                        intensitas kunjungan wisata.
                    </p>

                    <p style="text-align: justify;">
                        Berdasarkan hasil pemetaan, terlihat bahwa objek wisata yang berada
                        pada atau berdekatan dengan jaringan jalan kolektor cenderung memiliki
                        jumlah pengunjung yang lebih tinggi. Jalan kolektor berperan sebagai
                        penghubung utama antarwilayah yang mempermudah mobilitas wisatawan,
                        baik dari pusat Kota Yogyakarta maupun dari wilayah sekitarnya.
                    </p>

                    <p style="text-align: justify;">
                        Candi Prambanan merupakan objek wisata dengan jumlah pengunjung
                        tertinggi, yaitu sebesar <b>2.447.882 pengunjung</b>. Tingginya angka
                        tersebut dipengaruhi oleh letaknya yang strategis di sepanjang jalur
                        utama Yogyakartaâ€“Surakarta serta statusnya sebagai destinasi wisata
                        budaya berskala nasional dan internasional.
                    </p>

                    <p style="text-align: justify;">
                        Objek wisata lain seperti Tebing Breksi dan Jogja Bay juga menunjukkan
                        tingkat kunjungan yang relatif tinggi karena didukung oleh akses jalan
                        kolektor yang memadai. Sebaliknya, objek wisata yang berada lebih jauh
                        dari jalur utama umumnya memiliki jumlah pengunjung yang lebih rendah.
                        Kondisi ini menegaskan bahwa aksesibilitas jaringan jalan merupakan
                        salah satu faktor penting dalam pengembangan pariwisata berbasis
                        wilayah di Kabupaten Sleman.
                    </p>

                    <hr>

                    <!-- ANCHOR GRAFIK -->
                    <div id="grafik" style="scroll-margin-top:90px;"></div>

                    <h6 class="text-center mb-3">Grafik Total Pengunjung Pariwisata</h6>

                    <canvas id="grafikPengunjung" height="120"></canvas>

                </div>
            </div>

        </div>
    </section>

    <script>
        const dataPariwisata = [
            { nama: "Candi Prambanan", bulan: [216717, 196839, 142720, 113115, 248053, 230604, 182610, 190865, 133501, 180349, 184657, 427852], total: 2447882 },
            { nama: "Jogja Bay", bulan: [30015, 33773, 20566, 12541, 57244, 41084, 24480, 25937, 16400, 46154, 24605, 60752], total: 393551 },
            { nama: "Monjali", bulan: [21446, 21690, 19277, 12495, 21677, 19515, 7582, 3318, 7943, 11020, 15539, 30151], total: 191653 },
            { nama: "Tebing Breksi", bulan: [86130, 86033, 55727, 25469, 89279, 74542, 56605, 29147, 44714, 55084, 49949, 89651], total: 742330 },
            { nama: "Ulen Sentalu", bulan: [8744, 6582, 4751, 6246, 5451, 8566, 7480, 5543, 5374, 5148, 5482, 11029], total: 80396 }
        ];

        /* ===== MARKER MANUAL ===== */
        const titikManual = [
            { nama: "Candi Prambanan", lat: -7.752, lon: 110.491, total: 2447882 },
            { nama: "Jogja Bay", lat: -7.749, lon: 110.421, total: 393551 },
            { nama: "Monjali", lat: -7.7601, lon: 110.369, total: 191653 },
            { nama: "Tebing Breksi", lat: -7.781, lon: 110.503, total: 742330 },
            { nama: "Ulen Sentalu", lat: -7.597, lon: 110.423, total: 80396 }
        ];

        var map = L.map('map').setView([-7.7, 110.4], 11);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        L.Geoserver.wms("http://localhost:8080/geoserver/wms", {
            layers: "responsi:SHP_SLEMAN",
            transparent: true
        }).addTo(map);

        L.Geoserver.wms("http://localhost:8080/geoserver/wms", {
            layers: "responsi:JLN_SLEMAN_UPDATE",
            transparent: true
        }).addTo(map);

        L.Geoserver.wms("http://localhost:8080/geoserver/wms", {
            layers: "responsi:TITIK_PARIWISATA_VIEW",
            transparent: true
        }).addTo(map);

        /* ===== ICON ===== */
        var iconVintage = L.icon({
            iconUrl: "https://cdn-icons-png.flaticon.com/512/684/684908.png",
            iconSize: [36, 36],
            iconAnchor: [18, 36],
            popupAnchor: [0, -28]
        });

        var markerLayer = L.layerGroup().addTo(map);
        titikManual.forEach(d => {
            L.marker([d.lat, d.lon], { icon: iconVintage })
                .bindPopup(`<b>${d.nama}</b><br>Total Pengunjung: <b>${d.total.toLocaleString()}</b>`)
                .addTo(markerLayer);
        });

        const tbody = document.querySelector("#tabelData tbody");
        dataPariwisata.forEach(d => {
            tbody.innerHTML += `
                <tr>
                    <td>${d.nama}</td>
                    ${d.bulan.map(b => `<td>${b.toLocaleString()}</td>`).join("")}
                    <td><b>${d.total.toLocaleString()}</b></td>
                </tr>`;
        });

        new Chart(document.getElementById('grafikPengunjung'), {
            type: 'bar',
            data: {
                labels: dataPariwisata.map(d => d.nama),
                datasets: [{
                    data: dataPariwisata.map(d => d.total),
                    backgroundColor: '#8b6f47'
                }]
            },
            options: {
                plugins: { legend: { display: false } },
                scales: {
                    y: {
                        ticks: {
                            callback: v => v.toLocaleString()
                        }
                    }
                }
            }
        });
    </script>

</body>

<body>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top"
        style="background: rgba(30,20,10,0.85); backdrop-filter: blur(6px);">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#landing" style="font-family:'Playfair Display', serif;">
                ðŸŒ¿ WebGIS Sleman
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto text-center">
                    <li class="nav-item">
                        <a class="nav-link" href="#landing">Landing Page</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#mapSection">Peta</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#analisis">Analisis</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#grafik">Grafik</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

</body>

</html